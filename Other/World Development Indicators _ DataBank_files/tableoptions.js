function initTableOptions(){$(".colCanvas").resize(function(){});$("#customorientation-sortable-list").removeClass().sortable({update:function(){showOptionsChanged()}});$("#btnFormatSeries").off("click");$("#btnFormatSeries").on("click",function(){buildFormatSeriesTable()});setCallbackOptions(null,null);typeof initTableOptionsAdvanced==typeof Function&&initTableOptionsAdvanced();setTableOptions();setTableSize()}function setTableSize(){var r,u,t,i,n;typeof grid!="undefined"&&(r=$(".viewToggler").height()+$(".addRemoveVariables").height()+$("#upReportDD").height()+40,u=$("#divReportHeader").height()+$("#divReportNotes").height()+$("#divReportFooter").height()+$("#divReportSource").height(),$("#tableView").height($(window).height()-(getHeaderFooterHeight()+r)),t=$("#tableView").height()-u,i=$("#grdTableView_DXMainTable").height()+$("#grdTableView div.dxgvHSDC").height()+$("#grdTableView div.dxgvFCSD").height()+10,$("#grdTableView").size()>0&&(i>t?grid.SetHeight(t):grid.SetHeight(i),n=15,$("#grdTableView").width($("#tableView").width()-n*1),$("#grdTableView div.dxgvHSDC div").width($("#tableView").width()-n*2),$("#grdTableView div.dxgvCSD").width($("#tableView").width()-n*1),$("#grdTableView div.dxgvFCSD").width($("#tableView").width()-n*2)))}function onResetClick(){return setTableOptions(),!0}function clearPopups(){$("#formatSeries").hasClass("collapse")||$("#btnFormatSeries").trigger("click");typeof clearAdvancedPopups==typeof Function&&clearAdvancedPopups()}function resizeTable(){}function setCallbackOptions(){$(".metadata-column-cell").off("mousedown");$(".metadata-column-cell").on("mousedown",function(){gbl_metadata_icon_click=!0});typeof setCallbackOptionsAdvanced==typeof Function&&setCallbackOptionsAdvanced();setTableSize()}function setColumnSortingOptions(n,t){gbl_metadata_icon_click&&(t.cancel=!0,gbl_metadata_icon_click=!1)}function setTableOptions(){var n=$("#hdnReportOptionsCur").val();n!=""&&(n=$.parseJSON(n),n.IsOrientationTemplate?(setActiveTab("#liOrienationPopular","#tablePopularOrientation"),$("#rb_template_orientation"+n.SelectedOrientation).trigger("click")):setActiveTab("#liOrienationCustom","#tableCustomOrientation"),$.each(n.OrientationCustom,function(n,t){$("#custom-orientation-"+t.dimensionId+' option[value="'+t.dimensionAxis+'"]').prop("selected",!0)}),$("#row"+n.NoOfRowsPerPage).trigger("click"),$("#chkShowNotes").prop({checked:n.ShowNotes}),$("#ddlNAPref").val(n.EmptyFormat),n.ReportLevelScale?($("#ddlScale").val(n.Scale),$("#ddlPrecision").val(n.Precision)):($("#ddlScale").val(".."),$("#ddlPrecision").val("..")),$("#chkCommaSep").prop({checked:n.ThousandSeparator}),$("#txtReportHeader").val(n.ReportHeader),$("#txtReportFooter").val(n.ReportFooter),$("#txtReportNotes").val(n.ReportNotes),typeof setTableOptionsAdvanced==typeof Function&&setTableOptionsAdvanced(n))}function onUpdateTableOptionsClick(){var i=0,r=0,u=[],n,t,f;return $("#liOrienationCustom").hasClass("active")&&($(".custom-orientation-ddl").each(function(){var n=$("option:selected",this).val();u.push({dimensionId:this.id.replace("custom-orientation-",""),dimensionAxis:n});switch(n){case"0":i++;break;case"1":r++}}),i==0||r==0)?(alert("Please select atleast one dimension for Row/Column"),!1):(n=null,typeof getTableOptionsAdvanced==typeof Function&&(n=getTableOptionsAdvanced(),n==null))?!1:(t=setSeriesScaling(),f={IsOrientationTemplate:$("#liOrienationPopular").hasClass("active"),SelectedOrientation:$("#divTablePopularOrientation label.active input").prop("id").replace("rb_template_orientation",""),OrientationCustom:u,NoOfRowsPerPage:$("#divRowsPerPage label.active input").prop("id").replace("row",""),ShowNotes:$("#chkShowNotes").prop("checked"),EmptyFormat:$("#ddlNAPref").val(),ReportLevelScale:$("#ddlScale").val()!="..",Scale:$("#ddlScale").val()!=".."?$("#ddlScale").val():"",Precision:$("#ddlPrecision").val()!=".."?$("#ddlPrecision").val():"",SeriesScale:t.seriesscale,SeriesPrecision:t.seriesprecision,ThousandSeparator:$("#chkCommaSep").prop("checked"),ReportHeader:$("#txtReportHeader").val(),ReportFooter:$("#txtReportFooter").val(),AdvancedOptions:n,ReportNotes:$("#txtReportNotes").val()},$("#hdnReportOptionsNew").val(JSON.stringify(f)),clearPopups(),!0)}function showSortMenu(n,t){var i,r,u;if(t.objectType=="header"){if($($.browser.msie?t.htmlEvent.srcElement:t.htmlEvent.target).hasClass("dxgvIndentCell"))return;i=ASPxClientUtils.GetEventX(t.htmlEvent);r=ASPxClientUtils.GetEventY(t.htmlEvent);$("#pMenuGrid_DXMST_").css("border-top-width","0px").css("border-bottom-width","0px").find("tr td:nth-child(2)").css("border-bottom-width","0px");u=$("#bannerStrip").height()+$(".secondaryHeader").height()+$(".language").height();r+$(pMenuGrid.mainElement).height()>getDisplayHeight()+u&&(r=r-$(pMenuGrid.mainElement).height());i+$(pMenuGrid.mainElement).width()>getDisplayWidth()+$("#leftmainpanel").width()&&(i=i-$(pMenuGrid.mainElement).width());pMenuGrid.ShowAtPos(i,r)}}function getDisplayWidth(){return $("#divReportContent").width()}function getDisplayHeight(){return 0+$("#divReportContent").height()}function initTableOptionsAdvanced(){$("#ddlTableMRVFunc").on("change",function(){var n=$(this).val();n=="NONE"?($("#ddlTableMRVInt").prop("disabled","disabled"),$("#ddlTableMRVInt").val("0")):($("#ddlTableMRVInt").prop("disabled",""),$("#ddlTableMRVInt").val()=="0"&&$("#ddlTableMRVInt").val("1"))});$("#btnHideColumns").off("click");$("#btnHideColumns").on("click",function(){buildHideColumns()});$("#btnComparatorReport").off("click");$("#btnComparatorReport").on("click",function(){buildComparatorTable()});$("#btn-createCustomTheme-table").off("click");$("#btn-createCustomTheme-table").on("click",function(){TrackFeature("Styles->Template->Custom->Customize Report");$("#hdnTemplateId").val()==7&&$("#hdnTemplateId").val("1");var n=gbl_embedpath+"CustomTableHolder.aspx?template="+$("#hdnTemplateId").val();$("#hdnTemplateId").val()>2&&(n=gbl_embedpath+"template_editor.aspx?template="+$("#hdnTemplateId").val());$("#customTableHolder").attr("src","");$("#customTableHolder").attr("src",n)});$("#hdnTemplateId").val()=="7"?($("#chkTemplateResponsive").prop({checked:!0}),$("#btn-createCustomTheme-table").attr("disabled","disabled"),setActiveTab("#liTemplateResponsive","#tableResponsiveTemplate")):$("#liTemplateCustom").length>0?setActiveTab("#liTemplateCustom","#tableCustomTemplate"):setActiveTab("#liTemplateResponsive","#tableResponsiveTemplate");$("#chkTemplateResponsive").off("click");$("#chkTemplateResponsive").on("click",function(){TrackFeature("Styles->Template->Apply Responsive");$("#chkTemplateResponsive").prop("checked")?($("#btn-createCustomTheme-table").attr("disabled","disabled"),$("#hdnTemplateId").val("7")):($("#btn-createCustomTheme-table").removeAttr("disabled"),$("#hdnTemplateId").val("1"));var n="{TemplateId:'"+$("#hdnTemplateId").val()+"',ThemeName:'Silver', ThemeID:'D1', ThemeCSS:''}",t="//"+gbl_baseurl+"views/template_editor.aspx/SaveTableStyle_DDP";$("#report-loading").fadeIn(200);$.ajax({type:"POST",url:t,contentType:"application/json; charset=utf-8",data:n,dataType:"json",success:function(){$("#report-loading").fadeOut(500)},error:function(){$("#report-loading").fadeOut(500);window.location.href="//"+gbl_baseurl+"ddperror.aspx"}})});typeof initCustomStyles==typeof Function&&initCustomStyles()}function closeCustomThemeDialog(){$("#createCustomThemeModal").modal("hide")}function applyCustomThemeDialog(n){$("#hdnTemplateId").val(n);$("#createCustomThemeModal").modal("hide")}function setCallbackOptionsAdvanced(){typeof doCustomizations==typeof Function&&doCustomizations()}function clearAdvancedPopups(){$("#hideColumns").hasClass("collapse")||$("#btnHideColumns").trigger("click");$("#comparatorReport").hasClass("collapse")||$("#btnComparatorReport").trigger("click")}function setTableOptionsAdvanced(n){$("#ddlTableHierarchy").val(n.AdvancedOptions.Hierarchy);n.AdvancedOptions.RolloverDirection!=null&&n.AdvancedOptions.RolloverDirection!=""?$("#ddlTableMRVFunc").val(n.AdvancedOptions.RolloverDirection.toUpperCase()):$("#ddlTableMRVFunc").val("NONE");n.AdvancedOptions.RolloverInterval!=null&&n.AdvancedOptions.RolloverInterval!=""?$("#ddlTableMRVInt").val(n.AdvancedOptions.RolloverInterval):$("#ddlTableMRVInt").val("0");$("#chkTableHideEmptyRow").prop("checked",n.AdvancedOptions.HideEmptyRow);$("#chkTableHideEmptyCol").prop("checked",n.AdvancedOptions.HideEmptyColumn)}function getTableOptionsAdvanced(){if(!getHideColumnSelected()||!getComparatorSelected())return null;return{Hierarchy:$("#ddlTableHierarchy").val(),RolloverDirection:$("#ddlTableMRVFunc").val(),RolloverInterval:$("#ddlTableMRVInt").val(),HideEmptyRow:$("#chkTableHideEmptyRow").prop("checked"),HideEmptyColumn:$("#chkTableHideEmptyCol").prop("checked"),HideColumns:hidecolumns,Comparator:comparatorselected}}function getHideColumnSelected(){var n,t;if(hidecolumns=null,n=$(".adv-opt-hidecol-input").length,n>0){if(t=$(".adv-opt-hidecol-input:checked").length,n==t)return alert("All the columns cannot be set as hidden."),!1;hidecolumns="";$(".adv-opt-hidecol-input:checked").each(function(){hidecolumns!=""&&(hidecolumns+=",");hidecolumns+=$(this).attr("data-index")})}return!0}function getComparatorSelected(){comparatorselected=null;$(".comparator-table").length>0&&(comparatorselected="");var n=!0;return $(".comparator-table").each(function(){if($(this).find("input:checked").length>0){if($(this).attr("value").toLowerCase()!="classification"&&$(this).find("input:checked").length==$(this).find("input").length){alert("Cannot select all items for a comparator");n=!1;return}if($(this).attr("value-axis")=="0"&&hidecolumns!=null&&hidecolumns!=""){alert("Comparator and Hide Columns cannot be set together");n=!1;return}comparatorselected!=""&&(comparatorselected+="~");$(this).attr("value").toLowerCase()=="classification"&&(comparatorselected+=$(this).attr("value-dim")+"|");comparatorselected+=$(this).attr("value")+"|";comparatorselected+=$(this).find("input:checked").map(function(){return $(this).attr("data-value")}).get().join("|")}}),n}function buildHideColumns(){$("#hideColumns").hasClass("collapse")&&($("#report-loading").show(),$.ajax({type:"POST",async:!1,url:gbl_basepath+"AjaxServices/AjaxReportMethods.asmx/GetModalHideColumns",contentType:"application/json; charset=utf-8",data:"",dataType:"html",success:function(n){var t=$.parseJSON(n).d;$("#hideColumns").html(t);$(".adv-opt-hidecol-input").off("click");$(".adv-opt-hidecol-input").on("click",function(n){n.button!=null&&($(".selectionModifyTxt").show(),$("#faded").show(),$(".downloadMsg").is(":visible")&&$(".downloadMsg").hide())})},error:function(){window.location.href="ddperror.aspx"}}),$("#report-loading").hide())}var gbl_metadata_icon_click=!1,hidecolumns,comparatorselected;$(function(){gbl_prm._postBackSettings==null&&initTableOptions()});$(function(){});hidecolumns=null;comparatorselected=null